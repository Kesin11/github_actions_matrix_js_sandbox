name: "Docker in Docker"
on: [push]

jobs:
  docker_build:
    runs-on: ubuntu-latest
    container:
      image: docker
    steps:
    - uses: actions/checkout@v1

    - run: whoami
    - run: uname -a
    - run: env

    # build image using "docker in docker"
    - run: docker build -t self_build .

  docker_run_self:
    needs: docker_build
    runs-on: ubuntu-latest
    container:
      # self built image can use
      image: self_build

    steps:
      - run: node --version
